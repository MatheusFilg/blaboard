enum TaskPriority {
  HIGH
  MEDIUM
  LOW
  NONE
}

model Column {
  id             String       @id @default(auto()) @map("_id") @db.ObjectId
  name           String
  color          String?
  order          Int          @default(0)
  isCompleted    Boolean      @default(false)
  organizationId String
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  tasks          Task[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([organizationId])
  @@map("column")
}

model Task {
  id          String       @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  description String?
  priority    TaskPriority @default(NONE)
  dueDate     DateTime?
  order       Int          @default(0)

  labels TaskLabel[]

  columnId       String       @db.ObjectId
  column         Column       @relation(fields: [columnId], references: [id])
  assigneeId     String?
  assignee       User?        @relation(fields: [assigneeId], references: [id])
  organizationId String
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  createdById    String
  createdBy      User         @relation("TaskCreatedBy", fields: [createdById], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([organizationId])
  @@index([columnId])
  @@index([assigneeId])
  @@map("task")
}

type TaskLabel {
  text  String
  color String
}
